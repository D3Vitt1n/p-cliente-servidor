<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%
    // Parâmetros da transferência
    String destinatario = request.getParameter("destinatario");
    double valorTransferencia = Double.parseDouble(request.getParameter("valor"));

    // Atualizar o saldo
    double saldo = Double.parseDouble(request.getParameter("saldo"));
    saldo -= valorTransferencia;
%>
<!DOCTYPE html>
<html>
<head>
    <!-- Meta tags, títulos e links para estilos e scripts -->
    <!-- ... (seu código HTML) ... -->
</head>
<body>
    <!-- Redireciona de volta para a página anterior após atualizar o saldo -->
    <script>
        window.location.href = "SuaPaginaAnterior.jsp";
    </script>
    <script>
    // Função para atualizar o saldo na página
    function atualizarSaldo(novoSaldo) {
        document.getElementById('saldo').textContent = novoSaldo.toFixed(2);
    }

    // Evento de envio do formulário de transferência
    document.getElementById('transferForm').addEventListener('submit', function (e) {
        e.preventDefault(); // Evita o envio padrão do formulário

        // Obtenha o destinatário e o valor da transferência
        var destinatario = document.getElementById('destinatario').value;
        var valor = parseFloat(document.getElementById('valor').value);

        // Realize alguma validação dos valores (por exemplo, se o valor é válido)

        // Envia a solicitação para atualizar o saldo
        fetch('AtualizaSaldo.jsp?destinatario=' + destinatario + '&valor=' + valor)
            .then(response => response.text())
            .then(novoSaldo => {
                atualizarSaldo(parseFloat(novoSaldo));
            });

        // Limpe os campos do formulário, se necessário
        document.getElementById('destinatario').value = '';
        document.getElementById('valor').value = '';
    });
</script>
    
</body>
</html>
</body>
</html>